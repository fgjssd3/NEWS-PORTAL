{% load static %}
{% block body %}

<!doctype html>
<html lang="en">
<head>
 
  <meta charset="utf-8"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
 <link rel="icon" type="image/png" href="{% static 'images/logo2.png' %}">
  <title>News Portal â€“ Add Category</title>

  <!-- Bootstrap 5 + FA6 + SweetAlert2 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" rel="stylesheet"/>
  <script defer src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    :root{ --ink:#0f172a; --muted:#64748b; --primary:#0ea5e9; --primary-2:#0369a1; }
    body{ background:#f8fafc; color:var(--ink); }

    /* layout with our new sidebar */
    .with-sidebar{ margin-left:260px; transition:margin-left .2s ease; }
    body.sidebar-collapsed .with-sidebar{ margin-left:76px; }

    .card-glass{
      border:0; border-radius:1rem; background:#fff;
      box-shadow:0 12px 34px rgba(15,23,42,.12);
    }
    .form-floating>label{ color:var(--muted); }
  </style>
</head>
<body>

  {% include 'sidebar.html' %}
  {% include 'admin_nav.html' %}

  <!-- Main -->
  <main id="main-container" class="with-sidebar">
    <div class="container-fluid py-4 py-lg-5">

      <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mb-4">
        <h1 class="h4 mb-0" style="color:var(--primary-2)">
          <i class="fa-solid fa-folder-plus me-2"></i> Add Category
        </h1>
        <div class="d-flex gap-2">
          <a href="{% url 'view_category' %}" class="btn btn-sm btn-outline-primary">
            <i class="fa-solid fa-list me-1"></i> Manage Categories
          </a>
        </div>
      </div>

      <div class="row g-4">
        <div class="col-lg-6">
          <div class="card card-glass">
            <div class="card-body p-4 p-md-5">
              <h2 class="h6 mb-3">Create a new category</h2>
              <p class="text-muted mb-4">Keep category names concise and meaningful.</p>

              <form method="post" id="addCategoryForm" novalidate>
                {% csrf_token %}

                <div class="form-floating mb-4">
                  <input type="text" class="form-control" id="catname" name="catname"
                         placeholder="Category Name" required minlength="2" maxlength="60">
                  <label for="catname"><i class="fa-regular fa-folder-open me-1"></i> Category Name</label>
                </div>

                <div class="d-grid">
                  <button type="submit" class="btn btn-primary">
                    <i class="fa-solid fa-plus me-1"></i> Add
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <div class="col-lg-6">
          <div class="card card-glass">
            <div class="card-body p-4 p-md-5">
              <h2 class="h6 mb-3"><i class="fa-solid fa-lightbulb me-2"></i> Tips</h2>
              <ul class="mb-0 text-muted">
                <li>Use singular names (e.g., <em>Politics</em>, <em>Sports</em>).</li>
                <li>Avoid duplicates and excessive punctuation.</li>
                <li>Change order/visibility later from Manage Categories.</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

    </div>

    {% include 'adminfooter.html' %}
  </main>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>




  <script defer src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  window.addEventListener('DOMContentLoaded', function () {

// light client-side check
    document.getElementById('addCategoryForm').addEventListener('submit', function(e){
      const v = document.getElementById('catname').value.trim();
      if (v.length < 2){
        e.preventDefault();
        Swal.fire({icon:'error', title:'Enter a valid name', text:'Category name must be at least 2 characters.'});
      }
    });

    {% if error == "no" %}
      Swal.fire({
        icon: 'success',
        title: 'Category added',
        showConfirmButton: false,
        timer: 1200,
        timerProgressBar: true
      }).then(()=>{ window.location = "{% url 'view_category' %}"; });
    {% elif error == "yes" %}
      Swal.fire({ icon:'error', title:'Something went wrong', text:'Please try again.' });
    {% endif %}
  });
</script>

</body>
</html>

{% endblock %}
